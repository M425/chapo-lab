all:
  vars:
    # --- PROXMOX CONFIG ---
    pve_host: 192.168.178.225
    pve_user: "root@pam"
    pve_password: "chapo"
    pve_node: "server"
    pve_iso_storage: "local"
    pve_storage: "local-lvm"
    pve_storage_source: "local" # Where we download the image (must support 'import')
    pve_storage_dest: "local-lvm" # Where the VM disk effectively lives
    pve_bridge: "vmbr1"

    # --- TEMPLATE CONFIG ---
    template_id: 9000
    template_name: "ubuntu-minimal-template"
    image_url: "https://cloud-images.ubuntu.com/minimal/releases/jammy/release/ubuntu-22.04-minimal-cloudimg-amd64.img"
    image_filename: "ubuntu-22.04-minimal.img"
    image_path: "/var/lib/vz/template/iso"

    # --- CONNECTION CONFIG ---
    ssh_key_pub: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIPsnyip4GXugAf+n7RCwamBIWiY5exnEaKLfhK4mYxj+ mat@mat-win-lap"

    # --- GENERAL CONFIG ---
    timezone: "Europe/Rome"

  children:
    # Group for the Proxmox Hypervisor API
    pves:
      hosts:
        server:
          os_type: pve
          ansible_host: 192.168.178.225  # IP of your Proxmox server
          ansible_user: root
          node_name: server
          nic_ip_cidr: "192.168.178.225/24"


    # Group for the target Docker VM
    ubuntu:
      vars:
        os_type: ubuntu
        ansible_user: ubuntu
        nic_gateway: "192.168.179.1"
        nic_bridge: vmbr1
        admin_users: []
        docker_users: ['ubuntu']
        ufw_allowed_ports: []
        enable_auto_updates: true

      hosts:

        media:
          vm_name: media
          vm_id: 500
          vm_cores: 2
          vm_memory_mb: 2048
          vm_disk_gb: 40
          swap_size_mb: 2048
          nic_ip_cidr: "192.168.179.21/24"
          ansible_host: 192.168.179.21

          git_repo: ''
          
        core:
          os_type: ubuntu
          vm_name: core
          vm_id: 503

          # Hardware Specs
          vm_cores: 2
          vm_memory_mb: 2048
          vm_disk_gb: 40
          swap_size_mb: 2048
          
          # Networking Specs
          nic_ip_cidr: "192.168.179.23/24" 
          nic_gateway: "192.168.179.1"
          nic_bridge: vmbr1
          
          # Connection details
          ansible_host: 192.168.179.23
          ansible_user: ubuntu

          # OS conf
          admin_users: []
          docker_users: ['ubuntu']
          ufw_allowed_ports: []
          enable_auto_updates: true

          git_repo: ''
  
        runner:
          os_type: ubuntu
          vm_name: runner
          vm_id: 504

          # Hardware Specs
          vm_cores: 1
          vm_memory_mb: 1048
          vm_disk_gb: 40
          swap_size_mb: 1048
          
          # Networking Specs
          nic_ip_cidr: "192.168.179.24/24" 
          nic_gateway: "192.168.179.1"
          nic_bridge: vmbr1
          
          # Connection details
          ansible_host: 192.168.179.24
          ansible_user: ubuntu

          # OS conf
          admin_users: []
          docker_users: ['ubuntu']
          ufw_allowed_ports: []
          enable_auto_updates: true

          git_repo: ''

        qbittorrent:
          os_type: ubuntu
          vm_name: qbittorrent
          vm_id: 501

          # Hardware Specs
          vm_cores: 2
          vm_memory_mb: 2048
          vm_disk_gb: 40
          swap_size_mb: 2048
          
          # Networking Specs
          nic_ip_cidr: "192.168.179.22/24" 
          nic_gateway: "192.168.179.1"
          nic_bridge: vmbr1
          
          # Connection details
          ansible_host: 192.168.179.22
          ansible_user: ubuntu

          # OS conf
          admin_users: []
          docker_users: ['ubuntu']
          ufw_allowed_ports: []
          enable_auto_updates: true

    appliance:
      hosts:

        opnsense:
          os_type: appliance
          vm_name: opnsense
          vm_id: 500

          # Networking Specs
          nic_ip_cidr: "192.168.179.1/24"
          
          # Connection details
          ansible_host: 192.168.179.1
          ansible_user: root

        openmediavault:
          os_type: appliance
          vm_name: openmediavault
          vm_id: 100

          # Networking Specs
          nic_ip_cidr: "192.168.179.20/24"
          
          # Connection details
          ansible_host: 192.168.179.20
          ansible_user: root
